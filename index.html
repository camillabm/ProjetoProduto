<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Jornada Empreendedora: Crie a Pr√≥xima Empresa de Sucesso!</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            margin: 20px; 
            background-color: #f0f0f0;
            color: #333;
        }
        .status, .tabuleiro, .eventos, .descricao { 
            border: 3px solid #000; 
            padding: 15px; 
            margin-bottom: 20px; 
            background-color: #fff;
            box-shadow: 5px 5px 0px #888;
        }
        button { 
            margin: 8px; 
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0px #ccc;
        }
        .pixel-art {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        .character {
            width: 200px;
            height: 200px;
            margin: 10px auto;
            display: block;
        }
        .enemy {
            width: 200px;
            height: 200px;
            margin: 10px auto;
            display: block;
        }
        .progress-container {
            width: 100%;
            background-color: #ddd;
            margin: 20px 0;
        }
        .progress-bar {
            height: 30px;
            background-color: #4CAF50;
            text-align: center;
            line-height: 30px;
            color: white;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .stat {
            text-align: center;
            padding: 10px;
            background-color: #e8f4ea;
            border: 2px solid #2c3e50;
            border-radius: 5px;
        }
        .battle-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
        }
        .vs {
            font-size: 24px;
            margin: 0 20px;
        }
        #tela-inicial, #tela-creditos {
            text-align: center;
            margin-top: 50px;
        }
        #tela-creditos {
            display: none;
        }
    </style>
</head>
<body>

<div id="tela-inicial">
    <h1>Jornada Empreendedora: Crie a Pr√≥xima Empresa de Sucesso!</h1>
    <p>Voc√™ √© um(a) jovem vision√°rio(a) que se depara com uma sociedade regida por grandes corpora√ß√µes que n√£o oferecem servi√ßos e produtos novos ao mercados, sempre reciclando ideias estrangeiras e protegidos de amea√ßas burocr√°ticas. Seu sonho: fundar uma empresa a partir da sua ideia original, vista por muitos com grande potencial de sucesso, mas para isso, voc√™ deve atravessar as Terras do Empreendedorismo, onde cada decis√£o molda sua reputa√ß√£o, seus recursos e sua sobreviv√™ncia.<br><br>O primeiro passo √© escolher sua forma de abertura, uma decis√£o que determinar√° sua resili√™ncia nas batalhas contra os Chefes da Burocracia!
</p>
    <button onclick="iniciarJogo()">Iniciar</button>
    <button onclick="mostrarCreditos()">Cr√©ditos</button>
</div>

<div id="tela-creditos">
    <h1>Cr√©ditos</h1>
    <p>UFRGS<br>Desenvolvimento de projetos e produtos biotecnol√≥gicos<br></p>
    <p>Idealizado por:<br>Ana Paula Wives<br>Camilla Bruckmann<br>Isabelli Seiler<br>Jo√£o V√≠tor Petrucci<br>Vin√≠cius Schuster<br></p>
    <p>Prof. Dra. Karina Monteiro</p>
    <button onclick="voltarInicio()">Voltar</button>
</div>

<div id="conteudo-jogo" style="display:none;">
    <h1>Jornada Empreendedora: Crie a Pr√≥xima Empresa de Sucesso!</h1>

    <div id="status" class="status">
        <div class="stats">
            <div class="stat" id="vida-stat">Vida: 0</div>
            <div class="stat" id="dinheiro-stat">Dinheiro: R$0</div>
            <div class="stat" id="dano-stat">Dano: 0</div>
            <div class="stat" id="posicao-stat">Casa: 0</div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progresso" style="width: 0%">0%</div>
        </div>
    </div>
    <div id="descricao" class="descricao"></div>
    <div id="jogo" class="tabuleiro"></div>
</div>

<script>
// Fun√ß√µes para controle das telas
function iniciarJogo() {
    document.getElementById("tela-inicial").style.display = "none";
    document.getElementById("conteudo-jogo").style.display = "block";
    iniciarEscolha();
}

function mostrarCreditos() {
    document.getElementById("tela-inicial").style.display = "none";
    document.getElementById("tela-creditos").style.display = "block";
}

function voltarInicio() {
    document.getElementById("tela-creditos").style.display = "none";
    document.getElementById("tela-inicial").style.display = "block";
}

let statusJogador = {
    vida: 0,
    dinheiro: 0,
    dano: 0,
    posicao: 1,
    empresa: {}
};

// Mapeamento para os c√≥digos de imagem
const codigosImagem = {
    // Porte
    "MEI": "1",
    "ME": "2",
    "EPP": "3",
    
    // Natureza Jur√≠dica
    "EI": "1",
    "SLU": "2",
    "LTDA": "3",
    
    // CNAE
    "Com√©rcio": "1",
    "Servi√ßos": "2",
    "Ind√∫stria": "3",
    
    // Regime Tribut√°rio
    "Simples Nacional": "1",
    "Lucro Presumido": "2",
    "Lucro Real": "3"
};

const combinacoesValidas = {
    MEI: { naturezas: ["EI"], cnaes: ["Com√©rcio", "Servi√ßos"], regimes: ["Simples Nacional"] },
    ME: { naturezas: ["EI", "SLU", "LTDA"], cnaes: ["Com√©rcio", "Servi√ßos", "Ind√∫stria"], regimes: ["Simples Nacional", "Lucro Presumido", "Lucro Real"] },
    EPP: { naturezas: ["EI", "SLU", "LTDA"], cnaes: ["Com√©rcio", "Servi√ßos", "Ind√∫stria"], regimes: ["Simples Nacional", "Lucro Presumido", "Lucro Real"] }
};

const descricoes = {
    MEI: "MEI (Microempreendedor individual): Come√ßar sendo MEI √© uma forma simples de iniciar uma empresa que ainda precisa de ajustes de mercado e tempo para crescer. A menor burocracia, impostos fixos e baixos, e registro facilitado s√£o algumas vantagens, entretanto, essa classe permite um faturamento limitado a R$ 81 mil por ano, sendo poss√≠vel a contrata√ß√£o de um √∫nico funcion√°rio. √â ideal para quem quer formalizar um pequeno neg√≥cio de forma r√°pida e econ√¥mica.",
    ME: "EPP (Empresa de Pequeno Porte): Sendo uma EPP, seu empreendimento j√° est√° em fase de crescimento, com faturamento entre R$ 360 mil e R$ 4,8 milh√µes. Esse regime recebe mais possibilidades de expans√£o, como a contrata√ß√£o de mais funcion√°rios e a abertura de filiais, mas tamb√©m assume obriga√ß√µes cont√°beis mais robustas: manter livros cont√°beis organizados e enviar declara√ß√µes fiscais frequentes.",
    EPP: "EPP (Empresa de Pequeno Porte): Sendo uma EPP, seu empreendimento j√° est√° em fase de crescimento, com faturamento entre R$ 360 mil e R$ 4,8 milh√µes. Esse regime recebe mais possibilidades de expans√£o, como a contrata√ß√£o de mais funcion√°rios e a abertura de filiais, mas tamb√©m assume obriga√ß√µes cont√°beis mais robustas: manter livros cont√°beis organizados e enviar declara√ß√µes fiscais frequentes.<br><br><br>E a√≠, vai apostar no seguro ou planejar alto para expandir com tudo?",
    EI: "EI (Empreendedor Individual): √â a forma mais simples de abrir uma empresa sem s√≥cios. Nesse caso, o dono e a empresa s√£o legalmente a mesma pessoa, ou seja: n√£o h√° separa√ß√£o entre os bens pessoais e os da empresa e, nesse caso, se houver d√≠vidas, o patrim√¥nio do empreendedor (como casa, carro, poupan√ßa) pode ser usado para quit√°-las. As vantagens, entretanto, s√£o a menor burocracia no in√≠cio e o controle total do neg√≥cio, ideal para atividades menores e quem quer agilidade para come√ßar.",
    SLU: "SLU (Sociedade Limitada Unipessoal): Tipo de empresa onde h√° apenas um dono, mas aqui, esse tem prote√ß√£o patrimonial, havendo separa√ß√£o entre os bens da empresa e do dono. √â uma boa op√ß√£o para quem quer empreender sozinho, com mais seguran√ßa jur√≠dica e menos risco pessoal, entretanto, envolve mais gastos com contabilidade regular e taxas.",
    LTDA: "LTDA (Sociedade Limitada): Estrutura para empresas regidas por dois ou mais s√≥cios em que cada um tem responsabilidade limitada √† sua parte no capital social da empresa. √â uma das mais usadas no Brasil e, como vantagem, oferece a divis√£o de responsabilidades e maior possibilidade de captar investimentos, entretanto, exige contratos burocr√°ticos mais detalhados e abre margem para conflitos entre os s√≥cios e menos agilidade nas decis√µes.",
    Com√©rcio: "Com√©rcio: atividades voltadas para a compra e venda de produtos, podendo ser lojas f√≠sicas, online, atacadistas ou varejistas. Exemplo: lojas, supermercados e distribuidoras.",
    Servi√ßos: "Servi√ßos: envolve a presta√ß√£o de atividades que atendem √†s necessidades das pessoas ou de outras empresas, sem a produ√ß√£o de bens f√≠sicos. Nesse grupo est√£o inclu√≠das consultorias, sal√µes de beleza, empresas de reparos e at√© servi√ßos digitais como empresas de TI.",
    Ind√∫stria: "Ind√∫stria: Refere-se √† produ√ß√£o ou transforma√ß√£o de mat√©rias-primas em produtos finais e prontos para a venda. Essa categoria inclui usinas e oficinas que criam bens para o mercado, como f√°bricas de m√≥veis, alimentos ou montadora de ve√≠culos.<br><br><br>E a√≠, a qual grupo pertence sua ideia inovadora?",
    "Simples Nacional": "Simples Nacional: Esse √© um regime unificado e com regras mais simples. Re√∫ne v√°rios tributos (como IRPJ, CSLL, PIS, COFINS, INSS e ICMS/ISS) em uma √∫nica guia mensal (DAS), sendo o valor (al√≠quota) vari√°vel conforme o faturamento e CNAE. Mas cuidado, alguns neg√≥cios, como empresas de atividades financeiras e com s√≥cios no exterior, n√£o podem aderi-l√°s.",
    "Lucro Presumido": "Lucro Presumido: Regime em que os impostos s√£o calculados baseados em uma estimativa de lucro. Nesse caso, o governo presume quanto sua empresa lucra, com base no faturamento, e aplica uma al√≠quota fixa sobre esse valor. A burocracia √© menor que no regime de Lucro Real, mas pode sair caro se sua margem de lucro for baixa.",
    "Lucro Real": "Lucro Real: Regime mais t√©cnico e detalhado em que os impostos s√£o calculados com base no lucro real obtido e declarado pela empresa. √â obrigat√≥rio para faturamentos acima de R$ 78 milh√µes por ano ou de setores espec√≠ficos, sendo recomendado quando h√° margem de lucro reduzida ou muitas despesas dedut√≠veis, o que implica em um maior controle fiscal e cont√°bil."
};

const explicacoesEtapas = {
    1: "üìÑ Elabora√ß√£o do Contrato Social: Esse documento d√° origem legal √† empresa, funcionando como uma certid√£o de nascimento do neg√≥cio, estando nele definidos qual ser√° o nome e o tipo de atividade da empresa, quem s√£o os s√≥cios, regras de investimento, como ser√£o tomadas as decis√µes e como os lucros ser√£o distribu√≠dos. Para muitos √≥rg√£os p√∫blicos e institui√ß√µes financeiras, o contrato social √© a base para reconhecer a exist√™ncia da empresa e autorizar seu funcionamento.",
    2: "üìÑ Cl√°usula de prote√ß√£o aos s√≥cios: A cl√°usula de prote√ß√£o aos s√≥cios garante que os bens pessoais dos s√≥cios n√£o ser√£o usados para pagar d√≠vidas da empresa, limitando a responsabilidade deles ao valor investido no neg√≥cio. Importante porque oferece seguran√ßa jur√≠dica, protegendo o patrim√¥nio individual em caso de problemas financeiros na empresa. Se sua empresa for LTDA, pense bem.",
    3: "üè¢ Registro na Junta Comercial: O registro na Junta Comercial √© o primeiro passo formal para abrir uma empresa, √© nele que o contrato social √© homologado, deixando o neg√≥cio juridicamente v√°lido e abrindo possibilidade da empresa obter CNPJ, inscri√ß√£o estadual ou municipal e alvar√°s. Sem ele, a empresa n√£o pode emitir nota fiscal ou abrir conta banc√°ria empresarial.",
    4: "üè¢ Junta online ou presencial: Registrar a empresa digitalmente na Junta Comercial √© mais r√°pido e pr√°tico, al√©m de reduzir custos com deslocamento e impress√£o de documentos. Em muitos estados, o processo online √© integrado a outros √≥rg√£os, agilizando a libera√ß√£o do CNPJ e alvar√°s. Por outro lado, o registro presencial pode ser √∫til quando h√° d√∫vidas ou documentos f√≠sicos complexos, sendo mais lento e sujeito a filas.",
    6: "üÜî Obten√ß√£o do CNPJ: Cadastrar sua empresa na Receita Federal √© essencial para obter o CNPJ, que funciona como o ‚ÄúCPF‚Äù do seu neg√≥cio. Sem ele, a empresa n√£o pode emitir nota fiscal, abrir conta banc√°ria empresarial ou operar legalmente. Esse processo pode ser feito com a ajuda de um contador, essencial para garantir que essa e todas as obriga√ß√µes fiscais e cont√°beis sejam cumpridas corretamente, evitando erros que podem gerar multas ou problemas fiscais.",
    7: "üÜî Inclus√£o de CNAEs: Pensando na expans√£o do seu neg√≥cio, √© poss√≠vel incluir atividades extras no CNAE, permitindo que a empresa atue legalmente em mais de uma √°rea al√©m da principal, oferecendo flexibilidade para crescer e diversificar. No entanto, essa escolha pode trazer obriga√ß√µes fiscais diferentes, aumentar a complexidade cont√°bil e, em alguns casos, impedir o enquadramento no Simples Nacional. Por isso, pense bem, essa √© uma decis√£o estrat√©gica.",
    8: "üßæ Inscri√ß√£o Estadual: √â um registro obrigat√≥rio das empresas que vendem produtos f√≠sicos na Secretaria da Fazenda do estado onde atuam, levando √† gera√ß√£o de um n√∫mero que identifica o neg√≥cio como contribuinte do ICMS (Imposto sobre Circula√ß√£o de Mercadorias e Servi√ßos). Sem ela, a empresa n√£o pode emitir nota fiscal de vendas nem operar legalmente no com√©rcio, sendo assim, normalmente, para entender melhor as exig√™ncias desse cadastro e evitar erros, muitos empreendedores optam por contratar uma consultoria cont√°bil, que orienta sobre as obriga√ß√µes conforme a lei.",
    9: "üßæ Acelerar inscri√ß√£o estadual: Em alguns estados, tendo toda a documenta√ß√£o correta e o CNPJ ativo, √© poss√≠vel pagar uma taxa extra para agilizar a libera√ß√£o da inscri√ß√£o estadual, acelerando o in√≠cio das atividades da empresa. "
};

const perguntasPorCasa = {
    1: { pergunta: "Para a elabora√ß√£o do Contrato Social da sua empresa voc√™ prefere contratar um advogado/contador especializado ou usar um modelo gratuito da internet?", op1: {texto:"üí∏ R$150: Advogado/contador (+10 vida, +5 dano)", vida:10, dano:5, dinheiro:-150}, op2:{texto:"Gr√°tis: Modelo da internet (-10 vida)", vida:-10, dano:0, dinheiro:0} },
    2: { pergunta: "Voc√™ gostaria de incluir cl√°usulas de prote√ß√£o aos s√≥cios dentro do Contrato Social da sua empresa?", op1:{texto:"üí∏ R$100: Sim (+5 vida, +5 dano)", vida:5, dano:5, dinheiro:-100}, op2:{texto:"Gr√°tis: N√£o (-10 vida)", vida:-10, dano:0, dinheiro:0} },
    3: { pergunta: "Para a elabora√ß√£o da Junta Comercial, voc√™ gostaria de contratar um contador para realiz√°-la ou deseja fazer sozinho?", op1:{texto:"üí∏ R$120: Despachante (+10 vida)", vida:10, dano:0, dinheiro:-120}, op2:{texto:"Gr√°tis: Sozinho (-5 vida)", vida:-5, dano:0, dinheiro:0} },
    4: { pergunta: "Em rela√ß√£o ao registro da Junta Comercial, voc√™ prefere registrar de forma online ou presencial? ", op1:{texto:"Gr√°tis: Digital (+5 dano)", vida:0, dano:5, dinheiro:0}, op2:{texto:"Gr√°tis: Presencial (-5 vida)", vida:-5, dano:0, dinheiro:0} },
    6: { pergunta: "Para a obten√ß√£o do seu CNPJ (Cadastro Nacional da Pessoa Jur√≠dica), voc√™ gostaria de contratar um contador para obt√™-lo?", op1:{texto:"üí∏ R$100: Sim (+5 vida, +5 dano)", vida:5, dano:5, dinheiro:-100}, op2:{texto:"Gr√°tis: N√£o (-10 vida)", vida:-10, dano:0, dinheiro:0} },
    7: { pergunta: "Voc√™ deseja adicionar atividades extras ao seu CNAE (Classifica√ß√£o Nacional de Atividades Econ√¥micas)? Isso vai resultar em uma cobran√ßa de taxa extra.", op1:{texto:"üí∏ R$80: Sim (+5 dano)", vida:0, dano:5, dinheiro:-80}, op2:{texto:"Gr√°tis: N√£o (Sem efeito)", vida:0, dano:0, dinheiro:0} },
    8: { pergunta: "Pensando em evitar erros durante o cadastro da Inscri√ß√£o Estadual, voc√™ gostaria de pagar uma consultoria cont√°bil?", op1:{texto:"üí∏ R$120: Sim (+10 vida)", vida:10, dano:0, dinheiro:-120}, op2:{texto:"Gr√°tis: N√£o (-10 vida)", vida:-10, dano:0, dinheiro:0} },
    9: { pergunta: "O seu estado est√° contemplado na lista, assim, voc√™ gostaria de pagar a taxa extra para acelerar a libera√ß√£o da sua Inscri√ß√£o estadual?", op1:{texto:"üí∏ R$80: Sim (+5 dano)", vida:0, dano:5, dinheiro:-80}, op2:{texto:"Gr√°tis: N√£o (Sem efeito)", vida:0, dano:0, dinheiro:0} }
};

function mostrarDescricao(texto) {
    document.getElementById("descricao").innerHTML = `<div style="background-color:#f9f9f9; padding:15px; border-left:4px solid #4CAF50;">${texto.replace(/\n\n/g, '<br><br>')}</div>`;
}

function mostrarStatus() {
    document.getElementById("vida-stat").innerHTML = `‚ù§Ô∏è Vida: ${statusJogador.vida}`;
    document.getElementById("dinheiro-stat").innerHTML = `üí∞ Dinheiro: R$${statusJogador.dinheiro}`;
    document.getElementById("dano-stat").innerHTML = `‚öîÔ∏è Dano: ${statusJogador.dano}`;
    document.getElementById("posicao-stat").innerHTML = `‚úÖ Etapa: ${statusJogador.posicao}/10`;
    
    let progresso = (statusJogador.posicao / 10) * 100;
    document.getElementById("progresso").style.width = `${progresso}%`;
    document.getElementById("progresso").innerText = `${Math.round(progresso)}%`;
}

// Fun√ß√£o para gerar o nome da imagem do jogador
function getPlayerImage() {
    if (!statusJogador.empresa.porte || !statusJogador.empresa.natureza || 
        !statusJogador.empresa.cnae || !statusJogador.empresa.regime) {
        return "jogador.png"; // Imagem padr√£o se alguma escolha estiver faltando
    }
    
    const porteCode = codigosImagem[statusJogador.empresa.porte];
    const naturezaCode = codigosImagem[statusJogador.empresa.natureza];
    const cnaeCode = codigosImagem[statusJogador.empresa.cnae];
    const regimeCode = codigosImagem[statusJogador.empresa.regime];
    
    return `jogador_${porteCode}_${naturezaCode}_${cnaeCode}_${regimeCode}.png`;
}

// Fun√ß√£o para mostrar a imagem do jogador
function mostrarJogador() {
    const imgSrc = getPlayerImage();
    return `<img src="${imgSrc}" class="character pixel-art" alt="Personagem do Jogador" onerror="this.src='jogador.png'">`;
}

function iniciarEscolha() {
    let html = `
        <div style="text-align:center;">
            ${mostrarJogador()}
            <h3>Escolha o Porte da Empresa:</h3>
            <button onclick="escolherPorte('MEI')" style="background-color:#3498db;">MEI</button>
            <button onclick="escolherPorte('ME')" style="background-color:#e74c3c;">ME</button>
            <button onclick="escolherPorte('EPP')" style="background-color:#9b59b6;">EPP</button>
        </div>
    `;

    let texto = "Portes de Empresa:\n\n";
    ["MEI", "ME", "EPP"].forEach(p => texto += descricoes[p] + "\n\n");
    mostrarDescricao(texto);

    document.getElementById("jogo").innerHTML = html;
}

function escolherPorte(porte) {
    statusJogador.empresa.porte = porte;

    let html = `
        <div style="text-align:center;">
            ${mostrarJogador()}
            <h3>Escolha a Natureza Jur√≠dica:</h3>
    `;
    
    combinacoesValidas[porte].naturezas.forEach(natureza => {
        html += `<button onclick="escolherNatureza('${natureza}')" style="background-color:#${porte === 'MEI' ? '3498db' : porte === 'ME' ? 'e74c3c' : '9b59b6'};">${natureza}</button>`;
    });

    html += `</div>`;

    let texto = "Boa escolha! Mas antes de colocar sua ideia no mundo, voc√™ precisa decidir como sua empresa vai existir legalmente, essa escolha define como voc√™ ser√° visto pelo governo e o quanto do seu pr√≥prio patrim√¥nio estar√° em jogo, sendo uma decis√£o que pode proteger (ou comprometer) seu bolso, sua seguran√ßa e o futuro do seu neg√≥cio. No jogo, ela vai impactar suas vidas, patrim√¥nio e dano, importantes contra os chefes da burocracia.<br><br>Escolha com sabedoria: √© aqui que come√ßa sua jornada como empreendedor.<br><br>Naturezas Jur√≠dicas:\n\n";
    combinacoesValidas[porte].naturezas.forEach(n => texto += descricoes[n] + "\n\n");
    mostrarDescricao(texto);

    document.getElementById("jogo").innerHTML = html;
}

function escolherNatureza(natureza) {
    statusJogador.empresa.natureza = natureza;

    let html = `
        <div style="text-align:center;">
            ${mostrarJogador()}
            <h3>Escolha o CNAE:</h3>
    `;
    
    combinacoesValidas[statusJogador.empresa.porte].cnaes.forEach(cnae => {
        html += `<button onclick="escolherCNAE('${cnae}')" style="background-color:#${statusJogador.empresa.porte === 'MEI' ? '3498db' : statusJogador.empresa.porte === 'ME' ? 'e74c3c' : '9b59b6'};">${cnae}</button>`;
    });

    html += `</div>`;

    let texto = "A Classifica√ß√£o Nacional de Atividades Econ√¥micas √© um c√≥digo que identifica qual √© a atividade principal da sua empresa, servindo para o governo entender o que sua empresa faz, podendo assim aplicar regras e tributos para cada tipo de neg√≥cio. Escolher o CNAE correto influencia o regime tribut√°rio, as licen√ßas necess√°rias e as regras fiscais que sua empresa dever√° seguir.<br><br><br>CNAEs dispon√≠veis:\n\n";
    combinacoesValidas[statusJogador.empresa.porte].cnaes.forEach(c => texto += descricoes[c] + "\n\n");
    mostrarDescricao(texto);

    document.getElementById("jogo").innerHTML = html;
}

function escolherCNAE(cnae) {
    statusJogador.empresa.cnae = cnae;

    let html = `
        <div style="text-align:center;">
            ${mostrarJogador()}
            <h3>Escolha o Regime Tribut√°rio:</h3>
    `;
    
    combinacoesValidas[statusJogador.empresa.porte].regimes.forEach(regime => {
        html += `<button onclick="finalizarEscolha('${regime}')" style="background-color:#${statusJogador.empresa.porte === 'MEI' ? '3498db' : statusJogador.empresa.porte === 'ME' ? 'e74c3c' : '9b59b6'};">${regime}</button>`;
    });

    html += `</div>`;

    let texto = "O regime tribut√°rio define como vai ser calculado os impostos da sua empresa e como ela vai pagar. A escolha depende do tipo de atividade, faturamento e estrutura do neg√≥cio, sendo que um regime adequado a sua empresa pode significar menos impostos e burocracia.<br><br><br>Regimes Tribut√°rios:\n\n";
    combinacoesValidas[statusJogador.empresa.porte].regimes.forEach(r => texto += descricoes[r] + "\n\n");
    mostrarDescricao(texto);

    document.getElementById("jogo").innerHTML = html;
}

function finalizarEscolha(regime) {
    statusJogador.empresa.regime = regime;
    document.getElementById("descricao").innerText = "";
    inicializarStatus();
    mostrarStatus();
    avancarCasa();
}

function inicializarStatus() {
    let vida = 80, dinheiro = 300, dano = 5; // Reduzi valores iniciais
    if (statusJogador.empresa.porte === "MEI") { vida = 60; dinheiro = 350; dano = 4; }
    if (statusJogador.empresa.porte === "EPP") { vida = 100; dinheiro = 250; dano = 6; }

    // B√¥nus menores para escolhas
    if (statusJogador.empresa.natureza === "EI") { dinheiro += 30; dano += 1; }
    if (statusJogador.empresa.natureza === "SLU") { vida += 5; dano += 2; }
    if (statusJogador.empresa.natureza === "LTDA") { vida += 10; dinheiro -= 30; dano += 3; }

    if (statusJogador.empresa.cnae === "Com√©rcio") { dano += 3; }
    if (statusJogador.empresa.cnae === "Servi√ßos") { vida += 5; }
    if (statusJogador.empresa.cnae === "Ind√∫stria") { vida += 3; dano += 3; }

    if (statusJogador.empresa.regime === "Simples Nacional") { vida += 5; dinheiro += 5; }
    if (statusJogador.empresa.regime === "Lucro Presumido") { dano += 5; }
    if (statusJogador.empresa.regime === "Lucro Real") { dinheiro += 10; }

    statusJogador.vida = vida;
    statusJogador.dinheiro = dinheiro;
    statusJogador.dano = dano;
}

function avancarCasa() {
    if (statusJogador.dinheiro < 0) {
        iniciarCombateSerasa();
        return;
    }

    if (statusJogador.posicao > 10) {
        document.getElementById("jogo").innerHTML = `
            <div style="text-align:center;">
                ${mostrarJogador()}
                <h3 style="color:#27ae60;">Parab√©ns! Sua empresa foi aberta com sucesso!</h3>
                <p>Voc√™ completou todas as etapas da abertura de empresa!</p>
                <button onclick="location.reload()" style="background-color:#27ae60;">Jogar Novamente</button>
            </div>
        `;
        mostrarDescricao("Voc√™ superou todos os desafios burocr√°ticos e agora sua empresa est√° pronta para crescer!");
        return;
    }

    mostrarStatus();

    if (statusJogador.posicao === 5 || statusJogador.posicao === 10) {
        iniciarCombate(statusJogador.posicao);
    } else if (perguntasPorCasa[statusJogador.posicao]) {
        mostrarPergunta(statusJogador.posicao);
    } else {
        statusJogador.posicao++;
        avancarCasa();
    }
}

function mostrarPergunta(casa) {
    let p = perguntasPorCasa[casa];
    let explicacao = explicacoesEtapas[casa] || "";
    
    document.getElementById("jogo").innerHTML = `
        <div style="text-align:center;">
            ${mostrarJogador()}
            <h3>${p.pergunta}</h3>
            <div style="background-color:#f9f9f9; padding:10px; margin:10px 0; border-left:4px solid #3498db;">
                ${explicacao}
            </div>
            <button onclick="responder(${p.op1.vida}, ${p.op1.dano}, ${p.op1.dinheiro})" style="background-color:#${p.op1.dinheiro < 0 ? 'e74c3c' : '2ecc71'};">${p.op1.texto}</button>
            <button onclick="responder(${p.op2.vida}, ${p.op2.dano}, ${p.op2.dinheiro})" style="background-color:#${p.op2.dinheiro < 0 ? 'e74c3c' : p.op2.vida < 0 ? 'f39c12' : '3498db'};">${p.op2.texto}</button>
        </div>
    `;
}

function responder(vidaGanho, danoGanho, dinheiroGanho) {
    statusJogador.vida += vidaGanho;
    statusJogador.dano += danoGanho;
    statusJogador.dinheiro += dinheiroGanho;
    
    // Verifica se o jogador morreu ou faliu
    if (statusJogador.vida <= 0) {
        gameOver();
        return;
    }
    
    if (statusJogador.dinheiro < 0) {
        iniciarCombateSerasa();
        return;
    }
    
    statusJogador.posicao++;
    mostrarStatus();
    avancarCasa();
}

function iniciarCombate(casa) {
    let inimigo = casa === 5 ? { 
        vida: 70,  // Reduzi a vida do Le√£o da Receita
        nome: "Le√£o da Receita Federal", 
        imagem: "inimigo1.png",
        danoMin: 10, // Adicionei dano m√≠nimo e m√°ximo
        danoMax: 20
    } : { 
        vida: 100,   // Ajustei a vida da Fiscaliza√ß√£o
        nome: "Fiscaliza√ß√£o Municipal", 
        imagem: "inimigo2.png",
        danoMin: 10,
        danoMax: 15
    };
    
    statusJogador.inimigoAtual = inimigo;
    
    let mensagemBatalha = "";
    if (casa === 5) {
        mensagemBatalha = `
            <div style="background-color:#f9f9f9; padding:15px; margin-bottom:20px; border-left:4px solid #e74c3c;">
                <p>Depois de escolher sua classe, definir sua natureza jur√≠dica e registrar sua empresa na Junta Comercial, voc√™ sente o ch√£o tremer e, ao longe, um rugido ecoa pelos corredores da burocracia: o Le√£o da Receita Federal est√° √† espreita.</p>
                <p>Ele fareja omiss√µes, devora erros fiscais e pune aventureiros despreparados. Para enfrent√°-lo, voc√™ precisa mostrar que sua empresa est√° em ordem: impostos pagos, declara√ß√µes entregues e nenhuma pend√™ncia no reino do CNPJ.</p>
            </div>
        `;
    } else {
        mensagemBatalha = `
            <div style="background-color:#f9f9f9; padding:15px; margin-bottom:20px; border-left:4px solid #3498db;">
                <p>Voc√™ achou que a batalha contra o Le√£o da Receita era o fim? N√£o t√£o r√°pido. Com prancheta em punho e olhar afiado, a Fiscaliza√ß√£o Municipal aparece examinando placas, alvar√°s, licen√ßas, acessibilidade, barulho, hor√°rio de funcionamento‚Ä¶ nada escapa aos seus olhos treinados.</p>
                <p>Esse √© o teste final. Se sua empresa est√° em dia com as licen√ßas e exig√™ncias burocr√°ticas do munic√≠pio, voc√™ avan√ßa com o pr√™mio de poder seguir com o seu neg√≥cio ap√≥s todos os passos burocr√°ticos at√© aqui, mas se faltou um documento... prepare-se para advert√™ncias, multas ou at√© o temido embargo.</p>
                <p>Voc√™ vai enfrent√°-la tendo tudo regularizado?</p>
            </div>
        `;
    }
    
    document.getElementById("jogo").innerHTML = `
        <div style="text-align:center;">
            ${mensagemBatalha}
            <div class="battle-container">
                <div>
                    ${mostrarJogador()}
                    <div>Voc√™</div>
                </div>
                <div class="vs">VS</div>
                <div>
                    <img src="${inimigo.imagem}" class="enemy pixel-art" alt="${inimigo.nome}">
                    <div>${inimigo.nome}</div>
                </div>
            </div>
            <h3>Combate: ${inimigo.nome} - Vida: ${inimigo.vida}</h3>
            <button onclick="atacar()" style="background-color:#e74c3c;">Atacar (Dano: ${statusJogador.dano})</button>
            <button onclick="defender()" style="background-color:#3498db;">Defender (Reduz o dano recebido)</button>
        </div>
    `;
}

function atacar() {
    let inimigo = statusJogador.inimigoAtual;
    inimigo.vida -= statusJogador.dano;
    
    if (inimigo.vida <= 0) {
        // Adicionando recompensa espec√≠fica para o Inimigo 1 (Le√£o da Receita)
        if (inimigo.nome === "Le√£o da Receita Federal") {
            statusJogador.vida += 50;
            statusJogador.dinheiro += 200;
            mostrarStatus(); // Atualiza a exibi√ß√£o dos status
            
            document.getElementById("jogo").innerHTML = `
                <div style="text-align:center;">
                    ${mostrarJogador()}
                    <h3 style="color:#27ae60;">Voc√™ venceu o ${inimigo.nome}!</h3>
                    <p>Por derrotar o Le√£o da Receita, voc√™ recebeu:</p>
                    <p>+50 ‚ù§Ô∏è Vida e +R$200 üí∞ Dinheiro</p>
                    <button onclick="continuar()" style="background-color:#27ae60;">Avan√ßar</button>
                </div>
            `;
        } else {
            // Recompensa normal para outros inimigos
            document.getElementById("jogo").innerHTML = `
                <div style="text-align:center;">
                    ${mostrarJogador()}
                    <h3 style="color:#27ae60;">Voc√™ venceu o ${inimigo.nome}!</h3>
                    <p>${inimigo.nome} foi derrotado e voc√™ pode continuar sua jornada!</p>
                    <button onclick="continuar()" style="background-color:#27ae60;">Avan√ßar</button>
                </div>
            `;
        }
    } else {
        inimigoAtaca();
    }
}

function defender() {
    statusJogador.vida -= 10;
    inimigoAtaca();
}

function inimigoAtaca() {
    let inimigo = statusJogador.inimigoAtual;
    let danoInimigo = Math.floor(Math.random() * (inimigo.danoMax - inimigo.danoMin + 1)) + inimigo.danoMin;
    statusJogador.vida -= danoInimigo;
    mostrarStatus();
    
    // Verifica se o jogador morreu
    if (statusJogador.vida <= 0) {
        gameOver();
        return;
    }
    
    document.getElementById("jogo").innerHTML = `
        <div style="text-align:center;">
            <div class="battle-container">
                <div>
                    ${mostrarJogador()}
                    <div>Voc√™</div>
                </div>
                <div class="vs">VS</div>
                <div>
                    <img src="${inimigo.imagem}" class="enemy pixel-art" alt="${inimigo.nome}">
                    <div>${inimigo.nome}</div>
                </div>
            </div>
            <h3>${inimigo.nome} te atacou causando ${danoInimigo} de dano!</h3>
            <p>Vida do inimigo: ${inimigo.vida}</p>
            <button onclick="atacar()" style="background-color:#e74c3c;">Atacar (Dano: ${statusJogador.dano})</button>
            <button onclick="defender()" style="background-color:#3498db;">Defender (-5 de dano)</button>
        </div>
    `;
}

function gameOver() {
    document.getElementById("jogo").innerHTML = `
        <div style="text-align:center;">
            <img src="gameover.png" class="enemy pixel-art" alt="Game Over">
            <h3 style="color:#e74c3c;">Sua empresa faliu!</h3>
            <h4>Fim de jogo.</h4>
            <p>Voc√™ n√£o conseguiu superar os desafios burocr√°ticos.</p>
            <button onclick="location.reload()" style="background-color:#3498db;">Tentar Novamente</button>
        </div>
    `;
}

function continuar() {
    statusJogador.posicao++;
    avancarCasa();
}

function iniciarCombateSerasa() {
    statusJogador.inimigoAtual = { 
        vida: 80,
        nome: "SERASA", 
        imagem: "serasa.png",
        danoMin: 15, // Dano maior
        danoMax: 25
    };
    
    document.getElementById("jogo").innerHTML = `
        <div style="text-align:center;">
            <div class="battle-container">
                <div>
                    ${mostrarJogador()}
                    <div>Voc√™</div>
                </div>
                <div class="vs">VS</div>
                <div>
                    <img src="serasa.png" class="enemy pixel-art" alt="SERASA">
                    <div>${statusJogador.inimigoAtual.nome}</div>
                </div>
            </div>
            <h3 style="color:#e74c3c;">Voc√™ entrou em d√≠vida! O ${statusJogador.inimigoAtual.nome} apareceu!</h3>
            <p>Se vencer, voc√™ ganha R$300. Se perder... fal√™ncia!</p>
            <button onclick="atacarSerasa()" style="background-color:#e74c3c;">Atacar (Dano: ${statusJogador.dano})</button>
            <button onclick="defenderSerasa()" style="background-color:#3498db;">Defender (-5 de dano)</button>
        </div>
    `;
}

function atacarSerasa() {
    let inimigo = statusJogador.inimigoAtual;
    inimigo.vida -= statusJogador.dano;

    if (inimigo.vida <= 0) {
        statusJogador.dinheiro += 300;
        document.getElementById("jogo").innerHTML = `
            <div style="text-align:center;">
                ${mostrarJogador()}
                <h3 style="color:#27ae60;">Voc√™ venceu o ${inimigo.nome} e recebeu R$300!</h3>
                <p>Sua situa√ß√£o financeira foi regularizada e voc√™ pode continuar!</p>
                <button onclick="continuar()" style="background-color:#27ae60;">Continuar o jogo</button>
            </div>
        `;
    } else {
        inimigoAtacaSerasa();
    }
}

function defenderSerasa() {
    statusJogador.vida -= 5;
    inimigoAtacaSerasa();
}

function inimigoAtacaSerasa() {
    let inimigo = statusJogador.inimigoAtual;
    let danoInimigo = Math.floor(Math.random() * (inimigo.danoMax - inimigo.danoMin + 1)) + inimigo.danoMin;
    statusJogador.vida -= danoInimigo;

    if (statusJogador.vida <= 0) {
        document.getElementById("jogo").innerHTML = `
            <div style="text-align:center;">
                <img src="serasa.png" class="enemy pixel-art" alt="SERASA">
                <h3 style="color:#e74c3c;">Voc√™ foi derrotado pelo SERASA...</h3>
                <h4>Fim de jogo.</h4>
                <p>Sua empresa n√£o resistiu √†s d√≠vidas e teve que fechar.</p>
                <button onclick="location.reload()" style="background-color:#3498db;">Tentar Novamente</button>
            </div>
        `;
    } else {
        mostrarStatus();
        document.getElementById("jogo").innerHTML = `
            <div style="text-align:center;">
                <div class="battle-container">
                    <div>
                        ${mostrarJogador()}
                        <div>Voc√™</div>
                    </div>
                    <div class="vs">VS</div>
                    <div>
                        <img src="serasa.png" class="enemy pixel-art" alt="SERASA">
                        <div>${statusJogador.inimigoAtual.nome}</div>
                    </div>
                </div>
                <h3>${statusJogador.inimigoAtual.nome} te atacou causando ${danoInimigo} de dano!</h3>
                <p>Vida do inimigo: ${statusJogador.inimigoAtual.vida}</p>
                <button onclick="atacarSerasa()" style="background-color:#e74c3c;">Atacar (Dano: ${statusJogador.dano})</button>
                <button onclick="defenderSerasa()" style="background-color:#3498db;">Defender (-5 de dano)</button>
            </div>
        `;
    }
}
</script>

</body>
</html>
